
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Project Modules &#8212; PynamiX 0.0.3 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PynamiX example notebook" href="notebooks/PynamiX-Examples.html" />
    <link rel="prev" title="Welcome to PynamiX’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="project-modules">
<h1>Project Modules<a class="headerlink" href="#project-modules" title="Permalink to this headline">¶</a></h1>
<dl class="simple">
<dt>This project is made up of the following modules:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#color">color</a></p></li>
<li><p><a class="reference internal" href="#data">data</a></p></li>
<li><p><a class="reference internal" href="#exposure">exposure</a></p></li>
<li><p><a class="reference internal" href="#io">io</a></p></li>
<li><p><a class="reference internal" href="#measure">measure</a></p></li>
<li><p><a class="reference internal" href="#plotting">plotting</a></p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="color">
<span id="id1"></span><h1>Color<a class="headerlink" href="#color" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.color"></span><dl class="function">
<dt id="pynamix.color.virino">
<code class="sig-prename descclassname">pynamix.color.</code><code class="sig-name descname">virino</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.color.virino" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the virino colormap, useful for plotting the angular data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The virino colormap</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="data">
<span id="id2"></span><h1>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.data"></span><dl class="function">
<dt id="pynamix.data.fibres">
<code class="sig-prename descclassname">pynamix.data.</code><code class="sig-name descname">fibres</code><span class="sig-paren">(</span><em class="sig-param">theta_mean=0.0</em>, <em class="sig-param">kappa=1.0</em>, <em class="sig-param">N=500</em>, <em class="sig-param">dpi=200</em>, <em class="sig-param">lw=4</em>, <em class="sig-param">alpha=0.2</em>, <em class="sig-param">foldername='.'</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.data.fibres" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a fake image of fibres following a known distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>N</strong> (<em>int</em>) – Number of fibres to draw. More makes the image darker.</p></li>
<li><p><strong>theta_mean</strong> (<em>float</em>) – An angle between 0 and 2 pi that is the average fibre orientation.</p></li>
<li><p><strong>kappa</strong> (<em>float</em>) – A number greater than 0 that defines the alignment of the particles. kappa -&gt; inf is perfectly aligned, kappa -&gt; 0 is heterogeneous. This parameter is used in the vonmises circular distribution to generate random angles.</p></li>
<li><p><strong>dpi</strong> (<em>int</em>) – Resolution of final image</p></li>
<li><p><strong>lw</strong> (<em>int</em>) – Width of fibres in image</p></li>
<li><p><strong>alpha</strong> (<em>float</em>) – Transparency of the fibres. Default is 0.2.</p></li>
<li><p><strong>foldername</strong> (<em>path</em>) – Where to export the saved frames to. By default the current path</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Saves a file called <cite>fibres_theta_kappa_N.png</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.data.pendulum">
<code class="sig-prename descclassname">pynamix.data.</code><code class="sig-name descname">pendulum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.data.pendulum" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the default dataset of a pendulum swinging, recorded on a DEXELA detector at 4x4 binnging (see the logfile for more information)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>THIS DATA DOES NOT EXIST YET. FRANCOIS THIS IS YOUR JOB.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="pynamix.data.spiral">
<code class="sig-prename descclassname">pynamix.data.</code><code class="sig-name descname">spiral</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.data.spiral" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an image of a spiral to use for calibration purposes</p>
</dd></dl>

</div>
<div class="section" id="exposure">
<span id="id3"></span><h1>Exposure<a class="headerlink" href="#exposure" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.exposure"></span><dl class="function">
<dt id="pynamix.exposure.apply_ROI">
<code class="sig-prename descclassname">pynamix.exposure.</code><code class="sig-name descname">apply_ROI</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">top=0</em>, <em class="sig-param">left=0</em>, <em class="sig-param">right=None</em>, <em class="sig-param">bottom=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.exposure.apply_ROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an ROI to an image or a series of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>2D</em><em> or </em><em>3D array</em>) – The source data.</p></li>
<li><p><strong>top</strong> (<em>int</em>) – the index of the top edge of the ROI.</p></li>
<li><p><strong>left</strong> (<em>int</em>) – the index of the left edge of the ROI.</p></li>
<li><p><strong>right</strong> (<em>int</em>) – the index of the right edge of the ROI.</p></li>
<li><p><strong>bottom</strong> (<em>int</em>) – the index of the bottom edge of the ROI.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.exposure.clamp">
<code class="sig-prename descclassname">pynamix.exposure.</code><code class="sig-name descname">clamp</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">vmin</em>, <em class="sig-param">vmax</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.exposure.clamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Clamp an image between two values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ND array</em>) – The image to clamp.</p></li>
<li><p><strong>vmin</strong> (<em>float</em>) – The lowest value to clamp below.</p></li>
<li><p><strong>vmax</strong> (<em>float</em>) – The highest value to clamp above.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same data as the original, but with no values outside of the defined range.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>clamped_data (ND array)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.exposure.mean_std">
<code class="sig-prename descclassname">pynamix.exposure.</code><code class="sig-name descname">mean_std</code><span class="sig-paren">(</span><em class="sig-param">im</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.exposure.mean_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalise an image such that it has zero mean and standard deviation of one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>im</strong> (<em>2D array</em>) – The image to normalise.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The normalised image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>out (2D array)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.exposure.no_normalisation">
<code class="sig-prename descclassname">pynamix.exposure.</code><code class="sig-name descname">no_normalisation</code><span class="sig-paren">(</span><em class="sig-param">im</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.exposure.no_normalisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Do not normalise the input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>im</strong> (<em>2D array</em>) – The image to not normalise.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The unnormalised image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>out (2D array)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="io">
<span id="id4"></span><h1>IO<a class="headerlink" href="#io" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.io"></span><dl class="function">
<dt id="pynamix.io.download_file">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">download_file</code><span class="sig-paren">(</span><em class="sig-param">url</em>, <em class="sig-param">local_filename</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a file from a web site.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – location to get file from.</p></li>
<li><p><strong>local_filename</strong> (<em>str</em>) – Name of file to save</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.generate_seq">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">generate_seq</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">detector</em>, <em class="sig-param">mode</em>, <em class="sig-param">nbframe=10</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.generate_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an arbitrary SEQ file for testing purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The name of the SEQ file to write.</p></li>
<li><p><strong>detector</strong> (<em>int</em>) – Which detector to simulate (0, 1 or 2).</p></li>
<li><p><strong>mode</strong> (<em>int</em>) – Which detector mode to simulate (0|1|11|22|44).</p></li>
<li><p><strong>nbframe</strong> (<em>int</em>) – # of frames to write</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.load_PIVLab_txtfiles">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">load_PIVLab_txtfiles</code><span class="sig-paren">(</span><em class="sig-param">foldername</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.load_PIVLab_txtfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a folder full of PIVLab txtfiles and return the data as a series of arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>foldername</strong> (<em>str</em>) – Name of the folder that contains the text files to load.</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First textfile to load</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last textfile to load</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between textfiles to load</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>4 element tuple containing</p>
<ul class="simple">
<li><p>X (2D array): The <cite>x</cite> location of each patch</p></li>
<li><p>Y (2D array): The <cite>y</cite> location of each patch</p></li>
<li><p>u (3D array): The horizontal velocity of each patch. Has the shape [nt,nx,y].</p></li>
<li><p>v (3D array): The vertical velocity of each patch. Has the shape [nt,nx,y].</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.load_image">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">load_image</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">as_gray=True</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.load_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an image and put it into an appropriate format so that it can be used by any pynamix function. Returns an empty logfile too.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – location of image to load.</p></li>
<li><p><strong>as_gray</strong> (<em>bool</em>) – whether or not to convert the image to grayscale. If not, you will need to do this manually to be able to pass this image into other functions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.load_radio_txtfiles">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">load_radio_txtfiles</code><span class="sig-paren">(</span><em class="sig-param">foldername</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.load_radio_txtfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a set of radiographs produced with James’s Forward Projector from DEM data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>foldername</strong> (<em>str</em>) – location of data load.</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – number of first file to load.</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – number of last file to load.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.load_seq">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">load_seq</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">varian=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.load_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an SEQ file and related logfile, reshaping the file into a 3D array if a logfile is present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – location of SEQ/log file to load. Can be the full path to the SEQ or log file including or excluding the file format.</p></li>
<li><p><strong>varian</strong> (<em>bool</em>) – Was this recorded using the Varian software?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 3D array with dimensions [nt,nx,ny]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.save_as_tiffs">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">save_as_tiffs</code><span class="sig-paren">(</span><em class="sig-param">foldername</em>, <em class="sig-param">data</em>, <em class="sig-param">vmin=0</em>, <em class="sig-param">vmax=65535</em>, <em class="sig-param">angle=0</em>, <em class="sig-param">colour=False</em>, <em class="sig-param">normalisation=&lt;function no_normalisation&gt;</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.save_as_tiffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an appropriately shaped SEQ file into TIFF files. Optionally takes an angle to rotate the images by.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>foldername</strong> (<em>str</em>) – Location to save tiffs into. If this folder does not exist, it will be created for you. including or excluding the file format.</p></li>
<li><p><strong>data</strong> (<em>array</em>) – The data loaded as a 3D numpy array with dimensions [nt,nx,ny]</p></li>
<li><p><strong>vmin</strong> (<em>int</em>) – Minimum value to show in tiff</p></li>
<li><p><strong>vmax</strong> (<em>int</em>) – Maximum value to show in tiff</p></li>
<li><p><strong>angle</strong> (<em>float</em>) – Angle in degrees to rotate the images</p></li>
<li><p><strong>colour</strong> (<em>bool</em>) – Flag to save the image in colour instead of grayscale</p></li>
<li><p><strong>logscale</strong> (<em>bool</em>) – Flag to save the image using a logscale for the colours</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to save</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to save</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.strip_seq_log">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">strip_seq_log</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.strip_seq_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up filename by removing trailing .seq or .log</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – filename with possible file type</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filename with .seq or .log stripped</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>filename (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.upgrade_logfile">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">upgrade_logfile</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.upgrade_logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an old logfile (non-JSON formatted), and port it to JSON formatted. Deprecates the old logfile.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – location of log file to load. Can be the full path to the log file including or excluding the file format.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.io.write_seq">
<code class="sig-prename descclassname">pynamix.io.</code><code class="sig-name descname">write_seq</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.io.write_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an SEQ file and corresponding logfile from a 3D numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The name of the SEQ file to write.</p></li>
<li><p><strong>data</strong> (<em>array</em>) – The data to write.</p></li>
<li><p><strong>logfile</strong> – The original logfile of the source data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="measure">
<span id="id5"></span><h1>Measure<a class="headerlink" href="#measure" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.measure"></span><dl class="function">
<dt id="pynamix.measure.angular_binning">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">angular_binning</code><span class="sig-paren">(</span><em class="sig-param">patchw=32</em>, <em class="sig-param">N=10000</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.angular_binning" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a Monte-Carlo method to compute the individual Q(k) coefficients for equation 4 in <a class="reference external" href="https://www.nature.com/articles/s41598-017-08573-y">Guillard et al. 2017</a>.</p>
<p>Angular binning definition</p>
<p>step_angle=5 / 180 * pi</p>
<p>bin_angle=range(0 - step_angle / 2,- 180,- step_angle)</p>
<p>n_angle=floor(pi / step_angle)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Fix this definition.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>N</strong> (<em>int</em>) – Number of particle throws per iteration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array n_maskQ that stores Q(k) coefficients in a 4D table such that Q(kx, ky)=n_maskQ(kx,ky,:,:)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>4D array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.average_size_map">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">average_size_map</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">rnb=200</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em>, <em class="sig-param">xstep=32</em>, <em class="sig-param">ystep=32</em>, <em class="sig-param">patchw=32</em>, <em class="sig-param">normalisation=&lt;function mean_std&gt;</em>, <em class="sig-param">wmin=None</em>, <em class="sig-param">wmax=10</em>, <em class="sig-param">return_FFTs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.average_size_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the radial average of the 2D FFT at a set of patches in images in a series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> (<em>dict</em>) – The logfile.</p></li>
<li><p><strong>rnb</strong> (<em>int</em>) – Number of points to discretise in the radial direction</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to analyse in the series</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to analyse in the series</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between frames to analyse</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – Spacing between patches in the x direction</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – Spacing between patches in the y direction</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>normalisation</strong> (<em>function</em>) – Which function to normalise the patches by</p></li>
<li><p><strong>wmin</strong> (<em>float</em>) – Minimum wavelength (mm)</p></li>
<li><p><strong>wmax</strong> (<em>float</em>) – Maximum wavelength (mm)</p></li>
<li><p><strong>return_FFTs</strong> (<em>bool</em>) – Optionally return the full FFTs corresponding to each patch</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ol class="arabic simple">
<li><p>the x location of the centre of each patch, (2) the y location of the centre of each patch and (3) the average size for each patch, defined as the wavelength corresponding to the highest peak in the orthoradially summed power spectral density.</p></li>
</ol>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Three 2D arrays which describe</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.bidisperse_concentration_map">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">bidisperse_concentration_map</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">rnb=200</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em>, <em class="sig-param">xstep=32</em>, <em class="sig-param">ystep=32</em>, <em class="sig-param">patchw=32</em>, <em class="sig-param">normalisation=&lt;function mean_std&gt;</em>, <em class="sig-param">s_a=0.5</em>, <em class="sig-param">s_b=2.0</em>, <em class="sig-param">pad=1.2</em>, <em class="sig-param">return_FFTs=False</em>, <em class="sig-param">calib_func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.bidisperse_concentration_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the concentration of species a of a bidisperse mixture at a set of patches in images in a series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> (<em>dict</em>) – The logfile.</p></li>
<li><p><strong>rnb</strong> (<em>int</em>) – Number of points to discretise in the radial direction</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to analyse in the series</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to analyse in the series</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between frames to analyse</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – Spacing between patches in the x direction</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – Spacing between patches in the y direction</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>normalisation</strong> (<em>function</em>) – Which function to normalise the patches by</p></li>
<li><p><strong>s_a</strong> (<em>float</em>) – Size of one set of particles - will return the concentration of this size. Doesn’t matter if it is large or small. (mm)</p></li>
<li><p><strong>s_b</strong> (<em>float</em>) – Size of other particles (mm)</p></li>
<li><p><strong>pad</strong> (<em>float</em>) – Range to look for the peak around each size</p></li>
<li><p><strong>calib_func</strong> (<em>function</em>) – Function to use to calibrate the concentration from the peak fraction. If no function given, the peak fraction is returned.</p></li>
<li><p><strong>return_FFTs</strong> (<em>bool</em>) – Optionally return the full FFTs corresponding to each patch</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ol class="arabic simple">
<li><p>the x location of the centre of each patch, (2) the y location of the centre of each patch and (3) the average size for each patch, defined as the wavelength corresponding to the highest peak in the orthoradially summed power spectral density.</p></li>
</ol>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Three 2D arrays which describe</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.grid">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">grid</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">xstep</em>, <em class="sig-param">ystep</em>, <em class="sig-param">patchw</em>, <em class="sig-param">mode='bottom-left'</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate two 1D vectors that grid an image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> – The logfile.</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – bottom-left or centre. Either bottom/left aligned or centred in the image.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>centred mode not implemented yet</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The radial hanning window.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.hanning_window">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">hanning_window</code><span class="sig-paren">(</span><em class="sig-param">patchw=32</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.hanning_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a radial hanning window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The radial hanning window.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.main_direction">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">main_direction</code><span class="sig-paren">(</span><em class="sig-param">tensor</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.main_direction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the principal orientation and orientation magnitude of a nematic order tensor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tensor</strong> – 2 by 2 array representing the nematic order tensor.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two values, one for the principal orientation in radians (from zero to pi) and one for the magnitude of the orientation on a scale of zero to one.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.orientation_map">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">orientation_map</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em>, <em class="sig-param">xstep=32</em>, <em class="sig-param">ystep=32</em>, <em class="sig-param">patchw=32</em>, <em class="sig-param">normalisation=&lt;function mean_std&gt;</em>, <em class="sig-param">padding_mode=None</em>, <em class="sig-param">verbose=0</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.orientation_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the principal orientation and orientation magnitude at a set of patches in images in a series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> – The logfile.</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to analyse in the series</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to analyse in the series</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between frames to analyse</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – Spacing between patches in the x direction</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – Spacing between patches in the y direction</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>normalisation</strong> – Which normalisation to use.</p></li>
<li><p><strong>padding_mode</strong> – What to use for data points outside the experimental domain. Pick one from the list from the documentation of <cite>numpy.pad</cite> or None (default)</p></li>
<li><p><strong>verbose</strong> – (int): How noisy this function should be. 0 for nothing (default), 1 for text updates, 2 for figures.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ol class="arabic simple">
<li><p>the x location of the centre of each patch, (2) the y location of the centre of each patch, (3) the principal orientation and (4) the orientation magnitude for each patch. By default, pads with empty numbers to return NaNs.</p></li>
</ol>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Four 2D arrays which describe</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.radial_FFT">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">radial_FFT</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">rnb=200</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em>, <em class="sig-param">xstep=32</em>, <em class="sig-param">ystep=32</em>, <em class="sig-param">patchw=32</em>, <em class="sig-param">normalisation=&lt;function mean_std&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.radial_FFT" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the orthoradial sum of the 2D FFT at a set of patches in images in a series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> (<em>dict</em>) – The logfile.</p></li>
<li><p><strong>rnb</strong> (<em>int</em>) – Number of points to discretise in the radial direction</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to analyse in the series</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to analyse in the series</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between frames to analyse</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – Spacing between patches in the x direction</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – Spacing between patches in the y direction</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ol class="arabic simple">
<li><p>a 1D vector with the x location of each patch, (2) a 1D vector with the y location of each patch, (3) a 1D vector with the wavelengths corresponding to each spectral dnesity and (4) a 4D array representing the orthoradially summed power spectral density for each patch.</p></li>
</ol>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Four arrays which describe</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.validate_velocities">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">validate_velocities</code><span class="sig-paren">(</span><em class="sig-param">u</em>, <em class="sig-param">v</em>, <em class="sig-param">threshold=2</em>, <em class="sig-param">sigma=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.validate_velocities" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a velocity field so that it is within a tolerance of the gaussian smoothed value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u</strong> (<em>nd array</em>) – horizontal velocity field</p></li>
<li><p><strong>v</strong> (<em>nd array</em>) – vertical velocity field</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – How many times larger/smaller a value should be for it to be masked</p></li>
<li><p><strong>sigma</strong> (<em>float</em>) – Width of gaussian blurring to define mean field</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Masked u and v arrays.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.measure.velocity_map">
<code class="sig-prename descclassname">pynamix.measure.</code><code class="sig-name descname">velocity_map</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">logfile</em>, <em class="sig-param">tmin=0</em>, <em class="sig-param">tmax=None</em>, <em class="sig-param">tstep=1</em>, <em class="sig-param">searchw=4</em>, <em class="sig-param">xstep=32</em>, <em class="sig-param">ystep=32</em>, <em class="sig-param">patchw=32</em>, <em class="sig-param">zoomvalue=10</em>, <em class="sig-param">normalisation=&lt;function mean_std&gt;</em>, <em class="sig-param">padding_mode='edge'</em>, <em class="sig-param">verbose=0</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.measure.velocity_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the velocity field at a set of patches between two images in a series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The source data. Should be in the shape [nt,nx,ny]</p></li>
<li><p><strong>logfile</strong> – The logfile.</p></li>
<li><p><strong>tmin</strong> (<em>int</em>) – First frame to analyse in the series</p></li>
<li><p><strong>tmax</strong> (<em>int</em>) – Last frame to analyse in the series (velocities at this frame will not be calculated)</p></li>
<li><p><strong>tstep</strong> (<em>int</em>) – Spacing between frames to analyse</p></li>
<li><p><strong>xstep</strong> (<em>int</em>) – Spacing between patches in the x direction</p></li>
<li><p><strong>ystep</strong> (<em>int</em>) – Spacing between patches in the y direction</p></li>
<li><p><strong>searchw</strong> (<em>int</em>) – Half width of search area</p></li>
<li><p><strong>patchw</strong> (<em>int</em>) – The half width of the patch.</p></li>
<li><p><strong>zoom</strong> (<em>int</em>) – Zoom level for subpixel resolution.</p></li>
<li><p><strong>normalisation</strong> – Which normalisation to use.</p></li>
<li><p><strong>padding_mode</strong> – What to use for data points outside the experimental domain. Pick one from “fill”, “wrap” or “symm”</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – 0 for nothing. 1 for text. 2 for graphs.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>THIS WORKS VERY POORLY AND SLOWLY - NOTE SURE WHY!!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ol class="arabic simple">
<li><p>the x location of the centre of each patch, (2) the y location of the centre of each patch, (3) the x velocity (4) the y velocity. By default, pads with empty numbers to return NaNs.</p></li>
</ol>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Four 2D arrays which describe</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="plotting">
<span id="id6"></span><h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pynamix.plotting"></span><dl class="function">
<dt id="pynamix.plotting.hist">
<code class="sig-prename descclassname">pynamix.plotting.</code><code class="sig-name descname">hist</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">frame</em>, <em class="sig-param">vmin=0</em>, <em class="sig-param">vmax=65535</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.plotting.hist" title="Permalink to this definition">¶</a></dt>
<dd><p>Show a histogram of the grey levels in an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>ND array</em>) – Your data.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynamix.plotting.hist_GUI">
<code class="sig-prename descclassname">pynamix.plotting.</code><code class="sig-name descname">hist_GUI</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">vmin=0</em>, <em class="sig-param">vmax=65535</em><span class="sig-paren">)</span><a class="headerlink" href="#pynamix.plotting.hist_GUI" title="Permalink to this definition">¶</a></dt>
<dd><p>Show a histogram with editable min and max values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ND array</em>) – The image to clamp.</p></li>
<li><p><strong>vmin</strong> (<em>float</em>) – The lowest value to clamp below.</p></li>
<li><p><strong>vmax</strong> (<em>float</em>) – The highest value to clamp above.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same data as the original, but with masked values outside of the defined range.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>masked_data (masked ND array)</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PynamiX</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Project Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="#color">Color</a></li>
<li class="toctree-l1"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="#exposure">Exposure</a></li>
<li class="toctree-l1"><a class="reference internal" href="#io">IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="#measure">Measure</a></li>
<li class="toctree-l1"><a class="reference internal" href="#plotting">Plotting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/PynamiX-Examples.html">PynamiX example notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/Fibres.html">Calculate fibre orientation from a photograph</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/Eranga.html">Calculate bidisperse concentration field</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to PynamiX’s documentation!</a></li>
      <li>Next: <a href="notebooks/PynamiX-Examples.html" title="next chapter">PynamiX example notebook</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Benjy Marks.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/modules.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>